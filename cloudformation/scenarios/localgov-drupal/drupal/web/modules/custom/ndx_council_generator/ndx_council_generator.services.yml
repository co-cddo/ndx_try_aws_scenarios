services:
  # Story 5.1: ndx_council_generator Module Foundation

  ndx_council_generator.state_manager:
    class: Drupal\ndx_council_generator\Service\GenerationStateManager
    arguments:
      - '@state'
      - '@logger.channel.ndx_council_generator'

  ndx_council_generator.generator:
    class: Drupal\ndx_council_generator\Service\CouncilGeneratorService
    arguments:
      - '@ndx_council_generator.state_manager'
      - '@ndx_aws_ai.bedrock'
      - '@entity_type.manager'
      - '@logger.channel.ndx_council_generator'
      - '@config.factory'

  # Story 5.2: Council Identity Generator
  ndx_council_generator.identity_generator:
    class: Drupal\ndx_council_generator\Generator\CouncilIdentityGenerator
    arguments:
      - '@ndx_aws_ai.bedrock'
      - '@ndx_council_generator.state_manager'
      - '@config.factory'
      - '@extension.list.module'
      - '@logger.channel.ndx_council_generator'

  # Story 5.3: Content Generation Templates
  ndx_council_generator.content_template_manager:
    class: Drupal\ndx_council_generator\Service\ContentTemplateManager
    arguments:
      - '@extension.list.module'
      - '@logger.channel.ndx_council_generator'

  logger.channel.ndx_council_generator:
    parent: logger.channel_base
    arguments: ['ndx_council_generator']
