/**
 * @file
 * AI Diff Highlighting styles.
 *
 * Story 3.7: AI Preview Modal
 *
 * Styles for word-level diff highlighting between original and modified text.
 * Uses GOV.UK Design System colours with accessible contrast.
 */

/* ==========================================================================
   Diff Container
   ========================================================================== */

.ai-diff-container {
  display: flex;
  gap: 24px;
  margin-bottom: 16px;
}

.ai-diff-panel {
  flex: 1;
  min-width: 0;
}

.ai-diff-panel-label {
  font-size: 19px;
  font-weight: 700;
  line-height: 1.3;
  margin: 0 0 8px 0;
  color: #0b0c0c;
}

/* Original panel label styling */
.ai-diff-panel--original .ai-diff-panel-label {
  color: #505a5f;
}

/* Diff content areas */
.ai-diff-original,
.ai-diff-modified {
  padding: 16px;
  font-size: 16px;
  line-height: 1.5;
  border: 2px solid #b1b4b6;
  min-height: 150px;
  overflow-y: auto;
  white-space: pre-wrap;
  word-wrap: break-word;
}

.ai-diff-original {
  background-color: #f3f2f1;
  color: #505a5f;
}

.ai-diff-modified {
  background-color: #ffffff;
  border-color: #0b0c0c;
  color: #0b0c0c;
}

/* ==========================================================================
   Diff Highlighting - Word Level
   ========================================================================== */

/* Added text - green */
.ai-diff-added {
  display: inline;
  padding: 1px 2px;
  background-color: #cce5cc;
  color: #00552f;
  border-radius: 2px;
}

/* Removed text - red with strikethrough */
.ai-diff-removed {
  display: inline;
  padding: 1px 2px;
  background-color: #f6d7d2;
  color: #942514;
  text-decoration: line-through;
  border-radius: 2px;
}

/* Changed text - yellow (for future use in char-level diff) */
.ai-diff-changed {
  display: inline;
  padding: 1px 2px;
  background-color: #fff7cc;
  color: #594d00;
  border-radius: 2px;
}

/* ==========================================================================
   Diff Toggle Control
   ========================================================================== */

.ai-diff-toggle {
  display: flex;
  align-items: center;
  gap: 8px;
  margin-bottom: 16px;
}

.ai-diff-toggle__checkbox {
  width: 20px;
  height: 20px;
  margin: 0;
  cursor: pointer;
}

.ai-diff-toggle__label {
  font-size: 16px;
  color: #0b0c0c;
  cursor: pointer;
}

/* Focus state for toggle */
.ai-diff-toggle__checkbox:focus,
.ai-diff-toggle__checkbox:focus-visible {
  outline: 3px solid #ffdd00;
  outline-offset: 2px;
}

/* ==========================================================================
   Highlighting States
   ========================================================================== */

/* When highlighting is disabled, remove visual markers but keep structure */
.ai-diff-container:not(.ai-diff-highlight-enabled) .ai-diff-added,
.ai-diff-container:not(.ai-diff-highlight-enabled) .ai-diff-removed,
.ai-diff-container:not(.ai-diff-highlight-enabled) .ai-diff-changed {
  background-color: transparent;
  padding: 0;
  border-radius: 0;
}

.ai-diff-container:not(.ai-diff-highlight-enabled) .ai-diff-removed {
  text-decoration: none;
  color: inherit;
}

.ai-diff-container:not(.ai-diff-highlight-enabled) .ai-diff-added {
  color: inherit;
}

/* Default to highlighting enabled */
.ai-diff-container {
  /* Highlighting enabled by default */
}

.ai-diff-highlight-enabled .ai-diff-added,
.ai-diff-highlight-enabled .ai-diff-removed,
.ai-diff-highlight-enabled .ai-diff-changed {
  /* Styles already defined above */
}

/* ==========================================================================
   Diff Stats
   ========================================================================== */

.ai-diff-stats {
  display: flex;
  gap: 16px;
  padding: 8px 0;
  font-size: 14px;
  color: #505a5f;
  border-top: 1px solid #b1b4b6;
  margin-top: 16px;
}

.ai-diff-stat {
  display: flex;
  align-items: center;
  gap: 4px;
}

.ai-diff-stat__badge {
  display: inline-block;
  width: 12px;
  height: 12px;
  border-radius: 2px;
}

.ai-diff-stat__badge--added {
  background-color: #cce5cc;
  border: 1px solid #00552f;
}

.ai-diff-stat__badge--removed {
  background-color: #f6d7d2;
  border: 1px solid #942514;
}

/* ==========================================================================
   Responsive Design
   ========================================================================== */

@media (max-width: 767px) {
  .ai-diff-container {
    flex-direction: column;
  }

  .ai-diff-panel {
    width: 100%;
  }

  .ai-diff-stats {
    flex-wrap: wrap;
  }
}

/* ==========================================================================
   High Contrast Mode Support
   ========================================================================== */

@media (forced-colors: active) {
  .ai-diff-added {
    background-color: transparent;
    border: 2px solid LinkText;
    color: LinkText;
  }

  .ai-diff-removed {
    background-color: transparent;
    border: 2px solid GrayText;
    color: GrayText;
    text-decoration: line-through;
  }

  .ai-diff-changed {
    background-color: transparent;
    border: 2px solid Highlight;
    color: Highlight;
  }

  .ai-diff-original,
  .ai-diff-modified {
    border: 2px solid CanvasText;
  }
}

/* ==========================================================================
   Print Styles
   ========================================================================== */

@media print {
  .ai-diff-added {
    background-color: #e5f5e5 !important;
    -webkit-print-color-adjust: exact;
    print-color-adjust: exact;
  }

  .ai-diff-removed {
    background-color: #fbe9e7 !important;
    -webkit-print-color-adjust: exact;
    print-color-adjust: exact;
  }
}
