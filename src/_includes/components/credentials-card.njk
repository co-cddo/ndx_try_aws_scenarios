{#
  Credentials Card Component - Story 2.3

  Displays deployment credentials with:
  - Drupal site URL (clickable link + copy button)
  - Admin username with copy button
  - Admin password (hidden by default) with show/hide toggle and copy button
  - Direct "Log in to Admin" button
  - Visual feedback on copy success

  Required variables:
    - scenarioData: The scenario object from scenarios.yaml

  Note: Actual credentials come from CloudFormation Outputs.
  This component provides the UI pattern with demo/placeholder values.
#}

{% if scenarioData and scenarioData.deployment and scenarioData.deployment.outputs %}
<div class="ndx-credentials-card" id="credentials-card" role="region" aria-labelledby="credentials-card-title">
  <h2 class="govuk-heading-m" id="credentials-card-title">Your deployment credentials</h2>

  <p class="govuk-body">Copy these credentials from your CloudFormation Outputs tab:</p>

  <div class="ndx-credentials-card__content">
    {# Drupal URL #}
    <div class="ndx-credentials-card__field">
      <label class="govuk-label govuk-label--s" for="credential-url">Site URL</label>
      <div class="ndx-credentials-card__input-group">
        <input
          type="text"
          id="credential-url"
          class="govuk-input ndx-credentials-card__input"
          value="https://your-drupal-site.example.com"
          readonly
          aria-describedby="credential-url-hint"
        />
        <button
          type="button"
          class="govuk-button govuk-button--secondary ndx-copy-btn"
          data-copy-target="credential-url"
          aria-label="Copy site URL"
        >
          <span class="ndx-copy-btn__icon" aria-hidden="true">ğŸ“‹</span>
          <span class="ndx-copy-btn__text">Copy</span>
        </button>
        <a
          href="https://your-drupal-site.example.com"
          class="govuk-button govuk-button--secondary ndx-open-btn"
          target="_blank"
          rel="noopener noreferrer"
          aria-label="Open site in new tab"
          id="open-site-btn"
        >
          <span class="ndx-open-btn__icon" aria-hidden="true">â†—</span>
          <span class="ndx-open-btn__text">Open</span>
        </a>
      </div>
      <p id="credential-url-hint" class="govuk-hint govuk-!-font-size-14 govuk-!-margin-top-1">
        Find this as "DrupalUrl" in CloudFormation Outputs
      </p>
    </div>

    {# Admin Username #}
    <div class="ndx-credentials-card__field">
      <label class="govuk-label govuk-label--s" for="credential-username">Admin username</label>
      <div class="ndx-credentials-card__input-group">
        <input
          type="text"
          id="credential-username"
          class="govuk-input ndx-credentials-card__input"
          value="admin"
          readonly
          aria-describedby="credential-username-hint"
        />
        <button
          type="button"
          class="govuk-button govuk-button--secondary ndx-copy-btn"
          data-copy-target="credential-username"
          aria-label="Copy admin username"
        >
          <span class="ndx-copy-btn__icon" aria-hidden="true">ğŸ“‹</span>
          <span class="ndx-copy-btn__text">Copy</span>
        </button>
      </div>
      <p id="credential-username-hint" class="govuk-hint govuk-!-font-size-14 govuk-!-margin-top-1">
        Find this as "AdminUsername" in CloudFormation Outputs
      </p>
    </div>

    {# Admin Password #}
    <div class="ndx-credentials-card__field">
      <label class="govuk-label govuk-label--s" for="credential-password">Admin password</label>
      <div class="ndx-credentials-card__input-group">
        <input
          type="password"
          id="credential-password"
          class="govuk-input ndx-credentials-card__input"
          value="your-password-here"
          readonly
          autocomplete="off"
          aria-describedby="credential-password-hint"
        />
        <button
          type="button"
          class="govuk-button govuk-button--secondary ndx-toggle-btn"
          data-toggle-target="credential-password"
          aria-label="Show password"
          aria-pressed="false"
        >
          <span class="ndx-toggle-btn__icon ndx-toggle-btn__icon--show" aria-hidden="true">ğŸ‘</span>
          <span class="ndx-toggle-btn__icon ndx-toggle-btn__icon--hide" aria-hidden="true" hidden>ğŸ™ˆ</span>
          <span class="ndx-toggle-btn__text">Show</span>
        </button>
        <button
          type="button"
          class="govuk-button govuk-button--secondary ndx-copy-btn"
          data-copy-target="credential-password"
          aria-label="Copy admin password"
        >
          <span class="ndx-copy-btn__icon" aria-hidden="true">ğŸ“‹</span>
          <span class="ndx-copy-btn__text">Copy</span>
        </button>
      </div>
      <p id="credential-password-hint" class="govuk-hint govuk-!-font-size-14 govuk-!-margin-top-1">
        Find this as "AdminPassword" in CloudFormation Outputs
      </p>
    </div>
  </div>

  {# Login Button #}
  <div class="ndx-credentials-card__actions govuk-!-margin-top-4">
    <a
      href="#"
      class="govuk-button govuk-button--start"
      id="login-admin-btn"
      target="_blank"
      rel="noopener noreferrer"
      data-module="govuk-button"
    >
      Log in to Drupal Admin
      <svg class="govuk-button__start-icon" xmlns="http://www.w3.org/2000/svg" width="17.5" height="19" viewBox="0 0 33 40" aria-hidden="true" focusable="false">
        <path fill="currentColor" d="M0 0h13l20 20-20 20H0l20-20z"/>
      </svg>
    </a>
    <p class="govuk-body-s">Opens Drupal admin login page in a new tab</p>
  </div>

  {# CloudFormation Console Link #}
  <div class="govuk-inset-text govuk-!-margin-top-4">
    <p class="govuk-body govuk-!-font-weight-bold govuk-!-margin-bottom-2">Can't find your credentials?</p>
    <p class="govuk-body-s govuk-!-margin-bottom-2">
      View the <strong>Outputs</strong> tab in CloudFormation Console:
    </p>
    <p>
      <a
        href="https://console.aws.amazon.com/cloudformation/home?region={{ scenarioData.deployment.region | default('us-east-1') }}#/stacks?filteringStatus=active&filteringText={{ scenarioData.deployment.stackNamePrefix | default('ndx-try') }}"
        class="govuk-link"
        target="_blank"
        rel="noopener noreferrer"
      >
        Open CloudFormation Console<span class="govuk-visually-hidden"> (opens in new tab)</span>
      </a>
    </p>
  </div>

  {# Screen reader announcement area #}
  <div id="copy-announcement" class="govuk-visually-hidden" role="status" aria-live="polite"></div>
</div>
{% endif %}
