{#
  After Session Starts Component

  Displays information about what to do once your NDX:Try session is active:
  - How to access your deployed scenario
  - Expected outputs and endpoints
  - Session duration reminder

  Required variables:
    - scenarioData: The scenario object from scenarios.yaml
#}

{% if scenarioData and scenarioData.deployment %}
<div class="ndx-after-session" id="after-session">
  <h2 class="govuk-heading-m">Once your session is active</h2>

  <p class="govuk-body">When your NDX:Try session shows as <strong>Active</strong>, your resources are ready to use.</p>

  {# Access Your Scenario Section #}
  {% if scenarioData.deployment.outputs and scenarioData.deployment.outputs | length > 0 %}
  <div class="govuk-notification-banner govuk-notification-banner--success" role="region" aria-labelledby="success-banner-title">
    <div class="govuk-notification-banner__header">
      <h3 class="govuk-notification-banner__title" id="success-banner-title">
        Access your scenario
      </h3>
    </div>
    <div class="govuk-notification-banner__content">
      <p class="govuk-body">Find these details in the CloudFormation <strong>Outputs</strong> tab:</p>

      <dl class="govuk-summary-list govuk-summary-list--no-border">
        {% for output in scenarioData.deployment.outputs %}
        <div class="govuk-summary-list__row">
          <dt class="govuk-summary-list__key">
            {{ output.name }}
          </dt>
          <dd class="govuk-summary-list__value">
            {{ output.description }}
          </dd>
        </div>
        {% endfor %}
      </dl>
    </div>
  </div>
  {% else %}
  <div class="govuk-inset-text">
    <p class="govuk-body govuk-!-margin-bottom-0">
      Access your deployed resources by viewing the <strong>Outputs</strong> tab in the CloudFormation Console.
    </p>
  </div>
  {% endif %}

  {# Try It Out Quick Action #}
  <h3 class="govuk-heading-s">Try it out</h3>
  <p class="govuk-body">
    Follow the walkthrough guide to explore your scenario:
  </p>
  {% if scenarioData.id == 'council-chatbot' %}
  <p class="govuk-body">
    <a href="/walkthroughs/council-chatbot/" class="govuk-button govuk-button--start" data-module="govuk-button">
      Start walkthrough
      <svg class="govuk-button__start-icon" xmlns="http://www.w3.org/2000/svg" width="17.5" height="19" viewBox="0 0 33 40" aria-hidden="true" focusable="false">
        <path fill="currentColor" d="M0 0h13l20 20-20 20H0l20-20z"/>
      </svg>
    </a>
  </p>
  {% else %}
  <p class="govuk-body">
    <a href="/walkthroughs/{{ scenarioData.id }}/" class="govuk-button govuk-button--start" data-module="govuk-button">
      Start walkthrough
      <svg class="govuk-button__start-icon" xmlns="http://www.w3.org/2000/svg" width="17.5" height="19" viewBox="0 0 33 40" aria-hidden="true" focusable="false">
        <path fill="currentColor" d="M0 0h13l20 20-20 20H0l20-20z"/>
      </svg>
    </a>
  </p>
  {% endif %}

  {# Session Duration Reminder #}
  <div class="ndx-after-session__duration">
    <h3 class="govuk-heading-s">Session duration</h3>
    <p class="govuk-body">
      <span aria-hidden="true">⏱️</span>
      NDX:Try sessions typically last <strong>24 hours</strong>. After this time, resources are automatically removed.
    </p>
    <p class="govuk-body-s">
      Check your session expiry time on the <a href="https://ndx.digital.cabinet-office.gov.uk/try" class="govuk-link">NDX:Try portal</a>.
    </p>
  </div>
</div>
{% endif %}
